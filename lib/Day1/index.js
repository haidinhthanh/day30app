var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _react=_interopRequireDefault(require("react"));var _reactNative=require("react-native");var _WatchFace=_interopRequireDefault(require("./WatchFace"));var _WatchControl=_interopRequireDefault(require("./WatchControl"));var _Record=_interopRequireDefault(require("./Record"));var _jsxFileName="C:\\Users\\huunc\\HaiIntern\\day30app\\src\\Day1\\index.js";var StopWatch=function(_React$Component){(0,_inherits2.default)(StopWatch,_React$Component);function StopWatch(props){var _this;(0,_classCallCheck2.default)(this,StopWatch);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(StopWatch).call(this,props));_this.onStop=function(){_this.setState({stopWatch:true});};_this.state={sectionTime:1234567,totalTime:"00:00.00",stopWatch:false,resetWatch:true,initialTime:0,recordCount:0,currentTime:0,recordTime:0,timeAccumulation:0,records:[{order:"",time:""},{order:"",time:""},{order:"",time:""},{order:"",time:""},{order:"",time:""},{order:"",time:""}]};return _this;}(0,_createClass2.default)(StopWatch,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.onStop();this.onClear();}},{key:"render",value:function render(){var _this2=this;return _react.default.createElement(_reactNative.View,{style:{flex:1},__source:{fileName:_jsxFileName,lineNumber:60}},_react.default.createElement(_WatchFace.default,{sectionTime:this.state.sectionTime,totalTime:this.state.totalTime,__source:{fileName:_jsxFileName,lineNumber:61}}),_react.default.createElement(_WatchControl.default,{onStart:function onStart(){_this2.onStart();},onEnd:this.onStop,addRecord:function addRecord(){_this2.addRecord();},onClear:function onClear(){_this2.onClear();},__source:{fileName:_jsxFileName,lineNumber:62}}),_react.default.createElement(_Record.default,{records:this.state.records,__source:{fileName:_jsxFileName,lineNumber:63}}));}},{key:"onStart",value:function onStart(){var _this3=this;if(this.state.resetWatch){this.setState({stopWatch:false,resetWatch:false,timeAccumulation:0,initialTime:new Date().getTime()});}else{this.setState({stopWatch:false,initialTime:new Date().getTime()});}var milisec,second,minute,secmilisec,secsecond,secminute,coutingtime,seccountingtime;var interval=setInterval(function(){_this3.setState({currentTime:new Date().getTime()});coutingtime=_this3.state.timeAccumulation+_this3.state.currentTime-_this3.state.initialTime;minute=Math.floor(coutingtime/(60*1000));second=Math.floor((coutingtime-minute*(60*1000))/1000);milisec=Math.floor(coutingtime%1000/10);seccountingtime=coutingtime-_this3.state.recordTime;secminute=Math.floor(seccountingtime/(60*1000));secsecond=Math.floor((seccountingtime-secminute*60*1000)/1000);secmilisec=Math.floor(seccountingtime%1000/10);_this3.setState({totalTime:(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+"."+(milisec<10?"0"+milisec:milisec),sectionTime:(secminute<10?"0"+secminute:secminute)+":"+(secsecond<10?"0"+secsecond:secsecond)+"."+(secmilisec<10?"0"+secmilisec:secmilisec)});if(_this3.state.stopWatch){_this3.setState({timeAccumulation:coutingtime});clearInterval(interval);}},100);}},{key:"addRecord",value:function addRecord(){var _this$state=this.state,records=_this$state.records,recordCount=_this$state.recordCount,timeAccumulation=_this$state.timeAccumulation,currentTime=_this$state.currentTime,initialTime=_this$state.initialTime,sectionTime=_this$state.sectionTime,totalTime=_this$state.totalTime;records.unshift({order:recordCount++,time:totalTime});this.setState({recordCount:recordCount,recordTime:timeAccumulation+currentTime-initialTime,records:records});}},{key:"onClear",value:function onClear(){this.setState({sectionTime:"00:00.00",totalTime:"00:00.00",stopWatch:false,resetWatch:true,initialTime:0,recordCount:0,currentTime:0,recordTime:0,timeAccumulation:0,records:[{order:"",time:""},{order:"",time:""},{order:"",time:""},{order:"",time:""},{order:"",time:""},{order:"",time:""}]});}}]);return StopWatch;}(_react.default.Component);exports.default=StopWatch;StopWatch.navigationOptions={title:'Stop Watch',headerStyle:{backgroundColor:'#eee'}};